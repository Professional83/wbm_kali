#!/bin/bash
tmux has-session -t pentest
if [ $? != 0 ]; then
    tmux new-session -s pentest -n work -d
    #Note this is only grabbing header level info, not full packts
    tmux new-window -t pentest -n tcpdump -d "tcpdump -nn -v |tee /root/pen_tcpdump$(date +\"%Y%m%dT%H%M%s\").txt" 
    #Logging Reference: https://github.com/tmux-plugins/tmux-logging
    #   git clone https://github.com/tmux-plugins/tmux-logging /opt/tmux-logging
    tmux run-shell -t pentest /opt/tmux-logging/logging.tmux
    tmux send-keys -t pentest:work '#To turn on logging C-b P' C-m
    #tmux send-keys -t pentest 'cd /var/www/' C-m
    #tmux send-keys -t pentest 'vim' C-m
    #tmux split-window -v -t pentest
    #tmux split-window -v -t pentest
    #tmux select-layout -t pentest main-horizontal
    #tmux send-keys -t pentest:0.1 'cd /var/www/htdocs/' C-m
    #tmux new-window -n console -t pentest
    #tmux send-keys -t pentest:1 'cd /var/www/htdocs/' C-m
    tmux select-window -t pentest:0
fi
tmux attach -t pentest
